/*
 * @name: vuescroll 2.7.3
 * @author: wangyi
 * @description: A virtual scrollbar bar based on vue.js 2.0 inspired by slimscroll
 * @license: MIT
 * @GitHub: https://github.com/wangyi7099/vuescroll
 */
!function(t,e){"function"==typeof define&&define.amd?define(e):"undefined"!=typeof module?module.exports=e():t.Vue.use(e())}(this,function(){function t(t,e){return window.getComputedStyle(t).getPropertyValue(e)}var e={install:function(t){t.component(a.name,a),t.component(r.name,r),t.component(l.name,l),t.component(o.name,o)}},l={name:"vueScrollPanel",render:function(t){var e=this,l=e.scrollContentStyle;return l.overflow="hidden",t("div",{style:l,class:"vueScrollPanel",on:{mouseenter:function(){e.$emit("showBar")},mouseleave:function(){e.$emit("hideBar")},mousemove:function(){e.$emit("showBar")}}},this.$slots.default)},props:{id:{require:!0},scrollContentStyle:{}}},a={name:"vScrollBar",render:function(t){var e=this,l={height:e.state.height+"px",width:e.ops.width,position:"absolute",background:e.ops.background,top:e.state.top+"px",transition:"opacity .5s",cursor:"pointer",opacity:e.state.opacity,userSelect:"none"};return"right"==e.ops.pos?l.right=0:l.left=0,t("div",{style:l,class:"vScrollBar",on:{mouseenter:function(t){e.$emit("showVBar")}}},this.$slots.default)},props:{ops:{require:!1,default:{background:"hsla(220,4%,58%,.3)",width:"5px",float:"left",opacity:0,pos:"left"}},state:{top:{default:0},height:{default:0},opacity:{default:0}}}},r={name:"hScrollBar",render:function(t){var e=this,l={height:e.ops.height,width:e.state.width+"px",position:"absolute",background:e.ops.background,left:e.state.left+"px",transition:"opacity .5s",cursor:"pointer",opacity:e.state.opacity,userSelect:"none"};return"bottom"==e.ops.pos?l.bottom=0:l.top=0,t("div",{style:l,class:"hScrollBar",on:{mouseenter:function(t){e.$emit("showHBar")}}},this.$slots.default)},props:{ops:{require:!1,default:{background:"hsla(220,4%,58%,.3)",height:"5px",opacity:0,pos:"bottom"}},state:{left:{default:0},width:{default:0},opacity:{default:0}}}},o={name:"vueScroll",class:"vueScroll",data:()=>({scrollPanel:{el:"",ops:{}},vScrollBar:{el:"",ops:{background:"hsla(220,4%,58%,.3)",width:"5px",pos:"",deltaY:30,keepShow:!1,opacity:1},state:{top:0,height:0,opacity:0},minBarHeight:35,innerDeltaY:0},hScrollBar:{el:"",ops:{background:"hsla(220,4%,58%,.3)",height:"5px",deltaX:30,pos:"",keepShow:!1,opacity:1},state:{left:0,width:0,opacity:0},minBarWidth:35,innerDeltaX:0},listeners:[],mousedown:!1,isMouseLeavePanel:!0}),render:function(t){var e=this;return t("div",{style:{position:"relative",height:"100%",width:"100%"},on:{wheel:e.wheel,mouseenter:function(){e.isMouseLeavePanel=!1,e.showBar()},mouseleave:function(){e.isMouseLeavePanel=!0,e.hideBar()}}},[t("vueScrollPanel",{ref:"vueScrollPanel",on:{showBar:e.showBar,hideBar:e.hideBar},props:{scrollContentStyle:e.scrollContentStyle}},e.$slots.default),t("vScrollBar",{props:{ops:e.vScrollBar.ops,state:e.vScrollBar.state},ref:"vScrollBar",on:{showVBar:e.showVBar,hideVBar:e.hideVBar}}),t("hScrollBar",{props:{ops:e.hScrollBar.ops,state:e.hScrollBar.state},ref:"hScrollBar",on:{showHBar:e.showHBar,hideHBar:e.hideHBar}})])},mounted(){this.initEl(),this.mergeAll(),this.listenVBarDrag(),this.listenHBarDrag(),this.listenPanelTouch(),this.showBar()},methods:{initEl(){this.scrollPanel.el=this.$refs.vueScrollPanel&&this.$refs.vueScrollPanel.$el,this.vScrollBar.el=this.$refs.vScrollBar&&this.$refs.vScrollBar.$el,this.hScrollBar.el=this.$refs.hScrollBar&&this.$refs.hScrollBar.$el},mergeAll(){this.merge(this.ops.vBar,this.vScrollBar.ops),this.merge(this.ops.hBar,this.hScrollBar.ops)},merge(t,e,l){for(key in t)!1===l?this.$set(e,key,t[key]):Object.hasOwnProperty.call(e,key)&&this.$set(e,key,t[key])},getVBarHeight({deltaY:e}){var l=Math.floor(t(this.scrollPanel.el,"height").replace("px","")),a=Math.floor(this.scrollPanel.el.scrollHeight),r=Math.ceil((a-l)/Math.abs(e)),o=Math.max(l/(a/l),this.vScrollBar.minBarHeight);return a<=l||Math.abs(l-a)<=this.accuracy?o=0:(this.vScrollBar.innerDeltaY=(l-o)/r,{height:o,scrollPanelHeight:l,scrollPanelScrollHeight:a,deltaY:e})},getHBarWidth({deltaX:e}){var l=Math.floor(t(this.scrollPanel.el,"width").replace("px","")),a=Math.floor(this.scrollPanel.el.scrollWidth),r=Math.ceil((a-l)/Math.abs(e)),o=Math.max(l/(a/l),this.hScrollBar.minBarWidth);return a<=l||Math.abs(l-a)<=this.accuracy?o=0:(this.hScrollBar.innerDeltaX=(l-o)/r,{width:o,scrollPanelWidth:l,scrollPanelScrollWidth:a,deltaX:e})},resizeVBarTop({height:t,scrollPanelHeight:e,scrollPanelScrollHeight:l,deltaY:a}){var r=l-e-this.scrollPanel.el.scrollTop;return r<this.accuracy&&(r=0),e-(t+Math.abs(Math.ceil(r/a))*this.vScrollBar.innerDeltaY)},resizeHBarLeft({width:t,scrollPanelWidth:e,scrollPanelScrollWidth:l,deltaX:a}){var r=l-e-this.scrollPanel.el.scrollLeft;return r<this.accuracy&&(r=0),e-(t+Math.abs(Math.ceil(r/a))*this.hScrollBar.innerDeltaX)},showBar(){this.showVBar(),this.showHBar()},hideBar(){this.hideVBar(),this.hideHBar()},showVBar(){var t,e={deltaY:this.vScrollBar.ops.deltaY};this.isMouseLeavePanel&&!this.vScrollBar.ops.keepShow||(this.vScrollBar.state.height=t=this.getVBarHeight(e))&&(this.vScrollBar.state.top=this.resizeVBarTop(t),this.vScrollBar.state.height=t.height,this.vScrollBar.state.opacity=this.vScrollBar.ops.opacity)},showHBar(){var t,e={deltaX:this.hScrollBar.ops.deltaX};this.isMouseLeavePanel&&!this.hScrollBar.ops.keepShow||(this.hScrollBar.state.width=t=this.getHBarWidth(e))&&(this.hScrollBar.state.left=this.resizeHBarLeft(t),this.hScrollBar.state.width=t.width,this.hScrollBar.state.opacity=this.hScrollBar.ops.opacity)},hideVBar(){this.vScrollBar.ops.keepShow||!this.mousedown&&this.isMouseLeavePanel&&(this.vScrollBar.state.opacity=0)},hideHBar(){this.hScrollBar.ops.keepShow||!this.mousedown&&this.isMouseLeavePanel&&(this.hScrollBar.state.opacity=0)},wheel(t){this.showVBar(),this.scrollVBar(t.deltaY>0?1:-1,1),t.stopPropagation()},scrollVBar:function(e,l){var a=this.vScrollBar.state.top,r=t(this.scrollPanel.el,"height").replace("px",""),o=this.scrollPanel.el.scrollHeight,s=this.scrollPanel.el.scrollTop,i=this.vScrollBar.state.height,h=this.vScrollBar.innerDeltaY,n=this.vScrollBar.ops.deltaY;if(!(e<0&&a<=0||r<=a+i&&e>0||Math.abs(o-r)<this.accuracy)){var c=a+e*h*l,d=s+e*n*l;e<0?(this.vScrollBar.state.top=Math.max(0,c),this.scrollPanel.el.scrollTop=Math.max(0,d)):e>0&&(this.vScrollBar.state.top=Math.min(r-i,c),this.scrollPanel.el.scrollTop=Math.min(o-r,d))}var u,p={},B={};p.residual=o-s-r,p.scrolled=s,B.scrolled=this.vScrollBar.state.top,B.residual=r-this.vScrollBar.state.top-this.vScrollBar.state.height,B.height=this.vScrollBar.state.height,u=B.scrolled/(r-B.height),B.name="vBar",p.name="content",this.$emit("vscroll",B,p,u)},scrollHBar:function(e,l){var a=this.hScrollBar.state.left,r=t(this.scrollPanel.el,"width").replace("px",""),o=this.scrollPanel.el.scrollWidth,s=this.scrollPanel.el.scrollLeft,i=this.hScrollBar.state.width,h=this.hScrollBar.innerDeltaX,n=this.hScrollBar.ops.deltaX;if(!(e<0&&a<=0||r<=a+i&&e>0||Math.abs(o-r)<this.accuracy)){var c=a+e*h*l,d=s+e*n*l;e<0?(this.hScrollBar.state.left=Math.max(0,c),this.scrollPanel.el.scrollLeft=Math.max(0,d)):e>0&&(this.hScrollBar.state.left=Math.min(r-i,c),this.scrollPanel.el.scrollLeft=Math.min(o-r,d))}var u,p={},B={};p.residual=o-s-r,p.scrolled=s,B.scrolled=this.hScrollBar.state.left,B.residual=r-this.hScrollBar.state.left-this.hScrollBar.state.width,B.width=this.hScrollBar.state.width,u=B.scrolled/(r-B.width),B.name="hBar",p.name="content",this.$emit("hscroll",B,p,u)},listenVBarDrag:function(){var t,e,l=this;function a(a){var r=(e=a.pageY)-t;l.scrollVBar(r>0?1:-1,Math.abs(r/l.vScrollBar.innerDeltaY)),t=e}function r(e){var r={deltaY:l.vScrollBar.ops.deltaY};l.getVBarHeight(r)&&(l.mousedown=!0,t=e.pageY,l.showVBar(),document.addEventListener("mousemove",a),document.addEventListener("mouseup",function(t){l.mousedown=!1,l.hideVBar(),document.removeEventListener("mousemove",a)}))}this.listeners.push({dom:l.vScrollBar.el,event:r,type:"mousedown"}),l.vScrollBar.el.addEventListener("mousedown",r)},listenHBarDrag:function(){var t,e,l=this;function a(a){var r=(e=a.pageX)-t;l.scrollHBar(r>0?1:-1,Math.abs(r/l.hScrollBar.innerDeltaX)),t=e}function r(e){var r={deltaX:l.hScrollBar.ops.deltaX};l.getHBarWidth(r)&&(l.mousedown=!0,t=e.pageX,l.showHBar(),document.addEventListener("mousemove",a),document.addEventListener("mouseup",function(t){l.mousedown=!1,l.hideHBar(),document.removeEventListener("mousemove",a)}))}this.listeners.push({dom:l.hScrollBar.el,event:r,type:"mousedown"}),l.hScrollBar.el.addEventListener("mousedown",r)},listenPanelTouch:function(){var t,e,l,a,r=this,o=this.scrollPanel.el;function s(o){if(o.touches.length){var s=o.touches[0];l=s.pageX,a=s.pageY;var i=void 0,h=l-t,n=a-e;Math.abs(h)>Math.abs(n)?(i=h,r.scrollHBar(i>0?-1:1,Math.abs(i/r.hScrollBar.innerDeltaX))):Math.abs(h)<Math.abs(n)&&(i=n,r.scrollVBar(i>0?-1:1,Math.abs(i/r.vScrollBar.innerDeltaY))),t=l,e=a}}function i(l){var a={deltaY:r.vScrollBar.ops.deltaY},i={deltaX:r.hScrollBar.ops.deltaX};if((r.getHBarWidth(i)||r.getVBarHeight(a))&&l.touches.length){l.stopPropagation();var h=l.touches[0];r.mousedown=!0,t=h.pageX,e=h.pageY,r.showBar(),o.addEventListener("touchmove",s),o.addEventListener("touchend",function(t){r.mousedown=!1,r.hideBar(),o.removeEventListener("touchmove",s)})}}o.addEventListener("touchstart",i),this.listeners.push({dom:o,event:i,type:"touchstart"})}},beforeDestroy(){this.listeners.forEach(function(t){t.dom.removeEventListener(t.type,t.event)})},props:{ops:{default:function(){return{vBar:{},hBar:{}}}},scrollContentStyle:{default:function(){return{width:"100%",height:"100%"}}},accuracy:{default:5}}};return e});